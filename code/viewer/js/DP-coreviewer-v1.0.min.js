window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){var a,b=arguments;b.callee=b.callee.caller,a=[].slice.call(b),"object"==typeof console.log?log.apply.call(console.log,console,a):console.log.apply(console,a)}},function(a){function b(){}for(var c,d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");c=d.pop();)a[c]=a[c]||b}(function(){try{return console.log(),window.console}catch(a){return window.console={}}}()),$.fn.onAvailable=function(a){var b,c=this.selector;this.length>0?a.call(this):b=setInterval(function(){$(c).length>0&&(a.call($(c)),clearInterval(b))},50)},function(a){function b(a){return void 0!==a}function c(b,c,d){var e=function(){};e.prototype=c.prototype,b.prototype=new e,b.prototype.constructor=b,c.prototype.constructor=c,b._super=c.prototype,d&&a.extend(b.prototype,d)}function d(a,c){var d;"string"==typeof a&&(c=a,a=document);for(var g=0;e.length>g;++g){c=c.replace(e[g][0],e[g][1]);for(var h=0;f.length>h;++h)if(d=f[h],d+=0===h?c:c.charAt(0).toUpperCase()+c.substr(1),b(a[d]))return a[d]}return void 0}var e=[["",""],["exit","cancel"],["screen","Screen"]],f=["","o","ms","moz","webkit","webkitCurrent"],g=navigator.userAgent,h=d("fullscreenEnabled"),i=-1!==g.indexOf("Android")&&-1!==g.indexOf("Chrome"),j=!i&&b(d("fullscreenElement"))&&(!b(h)||h===!0),k=a.fn.jquery.split("."),l=2>parseInt(k[0])&&7>parseInt(k[1]),m=function(){this.__options=null,this._fullScreenElement=null,this.__savedStyles={}};m.prototype={_DEFAULT_OPTIONS:{styles:{boxSizing:"border-box",MozBoxSizing:"border-box",WebkitBoxSizing:"border-box"},toggleClass:null},__documentOverflow:"",__htmlOverflow:"",_preventDocumentScroll:function(){this.__documentOverflow=a("body")[0].style.overflow,this.__htmlOverflow=a("html")[0].style.overflow,a("body, html").css("overflow","hidden")},_allowDocumentScroll:function(){a("body")[0].style.overflow=this.__documentOverflow,a("html")[0].style.overflow=this.__htmlOverflow},_fullScreenChange:function(){this.isFullScreen()?(this._preventDocumentScroll(),this._triggerEvents()):(this._allowDocumentScroll(),this._revertStyles(),this._triggerEvents(),this._fullScreenElement=null)},_fullScreenError:function(b){this._revertStyles(),this._fullScreenElement=null,b&&a(document).trigger("fscreenerror",[b])},_triggerEvents:function(){a(this._fullScreenElement).trigger(this.isFullScreen()?"fscreenopen":"fscreenclose"),a(document).trigger("fscreenchange",[this.isFullScreen(),this._fullScreenElement])},_saveAndApplyStyles:function(){var b=a(this._fullScreenElement);this.__savedStyles={};for(var c in this.__options.styles)this.__savedStyles[c]=this._fullScreenElement.style[c],this._fullScreenElement.style[c]=this.__options.styles[c];this.__options.toggleClass&&b.addClass(this.__options.toggleClass)},_revertStyles:function(){var b=a(this._fullScreenElement);for(var c in this.__options.styles)this._fullScreenElement.style[c]=this.__savedStyles[c];this.__options.toggleClass&&b.removeClass(this.__options.toggleClass)},open:function(b,c){b!==this._fullScreenElement&&(this.isFullScreen()&&this.exit(),this._fullScreenElement=b,this.__options=a.extend(!0,{},this._DEFAULT_OPTIONS,c),this._saveAndApplyStyles())},exit:null,isFullScreen:null,isNativelySupported:function(){return j}};var n=function(){n._super.constructor.apply(this,arguments),this.exit=a.proxy(d("exitFullscreen"),document),this._DEFAULT_OPTIONS=a.extend(!0,{},this._DEFAULT_OPTIONS,{styles:{width:"100%",height:"100%"}}),a(document).bind(this._prefixedString("fullscreenchange")+" MSFullscreenChange",a.proxy(this._fullScreenChange,this)).bind(this._prefixedString("fullscreenerror")+" MSFullscreenError",a.proxy(this._fullScreenError,this))};c(n,m,{VENDOR_PREFIXES:["","o","moz","webkit"],_prefixedString:function(b){return a.map(this.VENDOR_PREFIXES,function(a){return a+b}).join(" ")},open:function(a){n._super.open.apply(this,arguments);var b=d(a,"requestFullscreen");b.call(a)},exit:a.noop,isFullScreen:function(){return null!==d("fullscreenElement")},element:function(){return d("fullscreenElement")}});var o=function(){o._super.constructor.apply(this,arguments),this._DEFAULT_OPTIONS=a.extend({},this._DEFAULT_OPTIONS,{styles:{position:"fixed",zIndex:"2147483647",left:0,top:0,bottom:0,right:0}}),this.__delegateKeydownHandler()};c(o,m,{__isFullScreen:!1,__delegateKeydownHandler:function(){var b=a(document);b.delegate("*","keydown.fullscreen",a.proxy(this.__keydownHandler,this));var c=l?b.data("events"):a._data(document).events,d=c.keydown;l?c.live.unshift(c.live.pop()):d.splice(0,0,d.splice(d.delegateCount-1,1)[0])},__keydownHandler:function(a){return this.isFullScreen()&&27===a.which?(this.exit(),!1):!0},_revertStyles:function(){o._super._revertStyles.apply(this,arguments),this._fullScreenElement.offsetHeight},open:function(){o._super.open.apply(this,arguments),this.__isFullScreen=!0,this._fullScreenChange()},exit:function(){this.__isFullScreen=!1,this._fullScreenChange()},isFullScreen:function(){return this.__isFullScreen},element:function(){return this.__isFullScreen?this._fullScreenElement:null}}),a.fullscreen=j?new n:new o,a.fn.fullscreen=function(b){var c=this[0];return b=a.extend({toggleClass:null,overflow:"hidden"},b),b.styles={overflow:b.overflow},delete b.overflow,c&&a.fullscreen.open(c,b),this}}(jQuery),function(a){function b(a){if(a in l.style)return a;var b=["Moz","Webkit","O","ms"],c=a.charAt(0).toUpperCase()+a.substr(1);if(a in l.style)return a;for(var d=0;d<b.length;++d){var e=b[d]+c;if(e in l.style)return e}}function c(){return l.style[m.transform]="",l.style[m.transform]="rotateY(90deg)",""!==l.style[m.transform]}function d(a){return"string"==typeof a&&this.parse(a),this}function e(a,b,c){b===!0?a.queue(c):b?a.queue(b,c):c()}function f(b){var c=[];return a.each(b,function(b){b=a.camelCase(b),b=a.transit.propertyMap[b]||a.cssProps[b]||b,b=i(b),-1===a.inArray(b,c)&&c.push(b)}),c}function g(b,c,d,e){var g=f(b);a.cssEase[d]&&(d=a.cssEase[d]);var h=""+k(c)+" "+d;parseInt(e,10)>0&&(h+=" "+k(e));var i=[];return a.each(g,function(a,b){i.push(b+" "+h)}),i.join(", ")}function h(b,c){c||(a.cssNumber[b]=!0),a.transit.propertyMap[b]=m.transform,a.cssHooks[b]={get:function(c){var d=a(c).css("transit:transform");return d.get(b)},set:function(c,d){var e=a(c).css("transit:transform");e.setFromString(b,d),a(c).css({"transit:transform":e})}}}function i(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function j(a,b){return"string"!=typeof a||a.match(/^[\-0-9\.]+$/)?""+a+b:a}function k(b){var c=b;return a.fx.speeds[c]&&(c=a.fx.speeds[c]),j(c,"ms")}a.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),m={},n=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;m.transition=b("transition"),m.transitionDelay=b("transitionDelay"),m.transform=b("transform"),m.transformOrigin=b("transformOrigin"),m.transform3d=c();var o={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},p=m.transitionEnd=o[m.transition]||null;for(var q in m)m.hasOwnProperty(q)&&"undefined"==typeof a.support[q]&&(a.support[q]=m[q]);l=null,a.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},a.cssHooks["transit:transform"]={get:function(b){return a(b).data("transform")||new d},set:function(b,c){var e=c;e instanceof d||(e=new d(e)),b.style[m.transform]="WebkitTransform"!==m.transform||n?e.toString():e.toString(!0),a(b).data("transform",e)}},a.cssHooks.transform={set:a.cssHooks["transit:transform"].set},a.fn.jquery<"1.8"&&(a.cssHooks.transformOrigin={get:function(a){return a.style[m.transformOrigin]},set:function(a,b){a.style[m.transformOrigin]=b}},a.cssHooks.transition={get:function(a){return a.style[m.transition]},set:function(a,b){a.style[m.transition]=b}}),h("scale"),h("translate"),h("rotate"),h("rotateX"),h("rotateY"),h("rotate3d"),h("perspective"),h("skewX"),h("skewY"),h("x",!0),h("y",!0),d.prototype={setFromString:function(a,b){var c="string"==typeof b?b.split(","):b.constructor===Array?b:[b];c.unshift(a),d.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);this.setter[a]?this.setter[a].apply(this,b):this[a]=b.join(",")},get:function(a){return this.getter[a]?this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=j(a,"deg")},rotateX:function(a){this.rotateX=j(a,"deg")},rotateY:function(a){this.rotateY=j(a,"deg")},scale:function(a,b){void 0===b&&(b=a),this.scale=a+","+b},skewX:function(a){this.skewX=j(a,"deg")},skewY:function(a){this.skewY=j(a,"deg")},perspective:function(a){this.perspective=j(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,b){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==a&&void 0!==a&&(this._translateX=j(a,"px")),null!==b&&void 0!==b&&(this._translateY=j(b,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");return a[0]&&(a[0]=parseFloat(a[0])),a[1]&&(a[1]=parseFloat(a[1])),a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||"0,0,0,0deg").split(","),b=0;3>=b;++b)a[b]&&(a[b]=parseFloat(a[b]));return a[3]&&(a[3]=j(a[3],"deg")),a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this)if(this.hasOwnProperty(c)){if(!m.transform3d&&("rotateX"===c||"rotateY"===c||"perspective"===c||"transformOrigin"===c))continue;"_"!==c[0]&&(a&&"scale"===c?b.push(c+"3d("+this[c]+",1)"):a&&"translate"===c?b.push(c+"3d("+this[c]+",0)"):b.push(c+"("+this[c]+")"))}return b.join(" ")}},a.fn.transition=a.fn.transit=function(b,c,d,f){var h=this,i=0,j=!0;"function"==typeof c&&(f=c,c=void 0),"function"==typeof d&&(f=d,d=void 0),"undefined"!=typeof b.easing&&(d=b.easing,delete b.easing),"undefined"!=typeof b.duration&&(c=b.duration,delete b.duration),"undefined"!=typeof b.complete&&(f=b.complete,delete b.complete),"undefined"!=typeof b.queue&&(j=b.queue,delete b.queue),"undefined"!=typeof b.delay&&(i=b.delay,delete b.delay),"undefined"==typeof c&&(c=a.fx.speeds._default),"undefined"==typeof d&&(d=a.cssEase._default),c=k(c);var l=g(b,c,d,i),n=a.transit.enabled&&m.transition,o=n?parseInt(c,10)+parseInt(i,10):0;if(0===o){var q=function(a){h.css(b),f&&f.apply(h),a&&a()};return e(h,j,q),h}var r={},s=function(c){var d=!1,e=function(){d&&h.unbind(p,e),o>0&&h.each(function(){this.style[m.transition]=r[this]||null}),"function"==typeof f&&f.apply(h),"function"==typeof c&&c()};o>0&&p&&a.transit.useTransitionEnd?(d=!0,h.bind(p,e)):window.setTimeout(e,o),h.each(function(){o>0&&(this.style[m.transition]=l),a(this).css(b)})},t=function(a){this.offsetWidth,s(a)};return e(h,j,t),this},a.transit.getTransitionValue=g}(jQuery),function(a){a.DP||(a.DP={}),a.DP.viewer=function(b,c,d){var e=this;e.$el=a(b),e.el=b,e.$el.data("DP.viewer",e),e.init=function(){e.init=c,e.options=a.extend({},a.DP.viewer.defaultOptions,d),e.documentdata.init(),e.UI.init(),e.UI.setLoader();try{e.documentdata.fetchMetaData()}catch(b){alert(b,e.error.getMessage(b))}},e.layout={scaleRatio:1,originalWidth:0,originalHeight:0,prevScaleRatio:1,pageNo:1,prevPageNo:1,maxWidthAtRatio:0,aspectRatio:1,fullScreenLock:0,init:function(){e.layout.set(),e.observer.register("zoom"),e.observer.subscribe("zoom",e.options.callbacks.zoomChange),e.observer.register("pageChange"),e.observer.subscribe("pageChange",e.options.callbacks.pageChange),e.observer.register("scroll"),e.observer.subscribe("scroll",e.layout.setPage)},set:function(){switch(e.options.layout){case"DP_DOCUMENT":if(!e.documentdata.contentViewable)throw 4e3;e.layout.documentLayout.init();break;case"DP_PRESENTATION":if(!e.documentdata.contentViewable)throw 4e3;e.layout.presentationLayout.init()}},documentLayout:{scrollLock:0,init:function(){e.layout.documentLayout.hooksInit()},hooksInit:function(){function b(){e.layout.fullScreenLock||e.layout.documentLayout.fitWidth([1])}e.$el.scroll(function(){if(!e.layout.documentLayout.scrollLock){var a=e.layout.documentLayout.getCurrentPage();e.observer.fire("scroll",[a])}});var c;a(window).bind("resize",function(){c&&clearTimeout(c),c=setTimeout(b,100)})},zoomTo:function(b){e.layout.documentLayout.zoomLock=1;var c=b[0],d=b[1];c=e.general.roundOff(c,4),d=void 0===d?500:0,e.layout.prevScaleRatio=e.layout.scaleRatio,e.layout.scaleRatio=c;var f=0;e.$el.find("."+e.UI.classNames.pageFrame).each(function(){var b=a(this).width()*(e.layout.scaleRatio/e.layout.prevScaleRatio),d=a(this).height()*(e.layout.scaleRatio/e.layout.prevScaleRatio);f=b>f?b:f,a(this).transition({width:b,height:d},0),a(this).children("."+e.UI.classNames.pageContent).transition({scale:c},0)}),e.layout.maxWidthAtRatio=f,e.maindiv.width(e.layout.maxWidthAtRatio+50);var g=(e.layout.maxWidthAtRatio-e.$el.width())/2+30;e.$el.scrollLeft(g),e.observer.fire("zoom",e.layout.scaleRatio)},zoomPage:function(b){{var c=e.pages[b-1];e.$el.width()-e.options.resizeOffsetWidth}0==e.layout.maxWidthAtRatio&&(e.layout.maxWidthAtRatio=a(e.pages[0]).width());var d=e.layout.scaleRatio,f=c.width()*d,g=c.height()*d;c.transition({width:f,height:g},0),c.children("."+e.UI.classNames.pageContent).transition({scale:d},0)},fitWidth:function(b){if(void 0!=b)var c=b[0];var d=e.$el.width()-e.options.resizeOffsetWidth;0==e.layout.maxWidthAtRatio&&(e.layout.maxWidthAtRatio=a(e.pages[0]).width());var f=e.layout.scaleRatio*d/e.layout.maxWidthAtRatio;e.layout.documentLayout.zoomTo([f,c])},scrollTo:function(a){var b=a[0];if(!e.documentdata.isPageValid(b))throw 4003;var c=e.pages[b-1].position().top-e.maindiv.position().top;e.layout.documentLayout.scrollLock=1,e.$el.stop().animate({scrollTop:c+40},500,function(){e.layout.documentLayout.scrollLock=0,e.layout.pageNo=b,e.observer.fire("pageChange",[b,e.documentdata.numPages])})},isPageVisible:function(a){if(e.documentdata.isPageValid(a)){var b=(e.pages[0].offset().top,e.pages[a-1]),c=parseFloat(b.css("marginBottom").replace("px","")),d=e.maindiv,f=e.$el.scrollTop(),g=d.offset().top,h=parseInt(b.offset().top-g);h=0!=h?h+1:h;var i=parseInt(h+b.height());return f>=h&i+c>=f?!0:!1}return!1},getCurrentPage:function(){if(e.layout.documentLayout.isPageVisible(e.layout.pageNo))return e.layout.pageNo;if(e.layout.documentLayout.isPageVisible(e.layout.pageNo+1))return e.layout.pageNo+1;if(e.layout.documentLayout.isPageVisible(e.layout.pageNo-1))return e.layout.pageNo-1;var b=1;return a.each(e.pages,function(a){return e.layout.documentLayout.isPageVisible(a+1)?(b=a+1,!1):void 0}),b}},presentationLayout:{prevHeight:0,init:function(){e.maindiv.find(".pf").hide(),e.maindiv.find(".pf:nth-child("+e.layout.pageNo+")").show(),e.layout.presentationLayout.hooksInit()},hooksInit:function(){function b(){e.layout.fullScreenLock||e.layout.fullScreenLock||e.controls.optimiseToViewer()}var c;a(window).bind("resize",function(){c&&clearTimeout(c),c=setTimeout(b,100)})},gotoPage:function(a){var b=parseInt(a[0]);if(!(e.documentdata.isPageValid(b)&e.layout.pageNo!=b))throw 4003;e.pages[e.layout.pageNo-1].fadeOut(250,function(){e.pages[b-1].fadeIn(250,function(){e.layout.pageNo=b,e.observer.fire("pageChange",[b,e.documentdata.numPages])})})},zoomTo:function(b){var c=b[0],d=b[1];d=void 0===d?500:0,e.layout.prevScaleRatio=e.layout.scaleRatio,e.layout.scaleRatio=c;var f=0;e.$el.find("."+e.UI.classNames.pageFrame).each(function(){var b=a(this).width()*(e.layout.scaleRatio/e.layout.prevScaleRatio),d=a(this).height()*(e.layout.scaleRatio/e.layout.prevScaleRatio);f=b>f?b:f,a(this).transition({width:b,height:d},0),a(this).children("."+e.UI.classNames.pageContent).transition({scale:c},0)}),e.layout.maxWidthAtRatio=f,e.maindiv.width(e.layout.maxWidthAtRatio+50),e.observer.fire("zoom",e.layout.scaleRatio)},zoomPage:function(b){{var c=e.pages[b-1];e.$el.height()-e.options.resizeOffsetHeight,e.$el.width()-e.options.resizeOffsetWidth,e.layout.aspectRatio}0==e.layout.maxWidthAtRatio&&(e.layout.maxWidthAtRatio=a(e.pages[0]).width());var d=e.layout.scaleRatio,f=c.width()*d,g=c.height()*d;c.transition({width:f,height:g},0),c.children("."+e.UI.classNames.pageContent).transition({scale:d},0),e.layout.maxWidthAtRatio=a(e.pages[b-1]).width(),e.maindiv.width(e.layout.maxWidthAtRatio+50)},fitWidth:function(b){if(void 0!=b)var c=b[0];var d=e.$el.width()-e.options.resizeOffsetWidth;0==e.layout.maxWidthAtRatio&&(e.layout.maxWidthAtRatio=a(e.pages[0]).width());var f=e.layout.scaleRatio*d/e.layout.maxWidthAtRatio;e.layout.documentLayout.zoomTo([f,c])},fitHeight:function(b){{var c=e.$el.height()-e.options.resizeOffsetHeight;e.$el.width()-e.options.resizeOffsetWidth}if(void 0!=b)var d=b[0];e.layout.presentationLayout.prevHeight=c,0==e.layout.maxWidthAtRatio&&(e.layout.maxWidthAtRatio=a(e.pages[0]).width());var f=e.layout.maxWidthAtRatio/e.layout.aspectRatio,g=e.layout.scaleRatio*c/f;e.layout.presentationLayout.zoomTo([g,d])}},setPage:function(a){e.layout.pageNo!=a[0]&&(e.layout.pageNo=a[0],a[1]=e.documentdata.numPages,e.observer.fire("pageChange",a))},getDimensions:function(){e.layout.originalWidth=e.pages[0].width(),e.layout.originalHeight=e.pages[0].height()},getAspectRatio:function(){e.layout.aspectRatio=e.pages[0].width()/e.pages[0].height()}},e.UI={init:function(){e.observer.register("mainDocLoaded"),e.observer.subscribe("mainDocLoaded",e.documentdata.setViewable),e.observer.subscribe("mainDocLoaded",e.layout.getAspectRatio),e.observer.subscribe("mainDocLoaded",e.layout.getDimensions),e.observer.subscribe("mainDocLoaded",e.controls.optimiseToViewer),e.observer.register("onPageLoad"),e.observer.subscribe("onPageLoad",e.options.callbacks.onPageLoad)},classNames:{loader:"DP-loader",pageFrame:"pf",pageContent:"pc"},idNames:{},setLoader:function(){e.$el.html('<div class="'+e.UI.classNames.loader+'"><img src="'+e.options.loaderPath+'" /></div>')},unsetLoader:function(){e.$el.empty()},setPagesLoader:function(){a.each(e.pages,function(){a(this).html('<div class="'+e.UI.classNames.loader+'"><img src="'+e.options.loaderPath+'" /></div>')})},setPageHTML:function(b,c,d){void 0===d?e.pages[b-1].html(c):(c=a(c),e.pages[b-1].replaceWith(c),e.pages[b-1]=e.$el.find(".pf:nth-child("+b+")"),1!=e.layout.scaleRatio&&e.layout.presentationLayout.zoomPage(b))},loadDocMain:function(b){switch(e.options.layout){case"DP_DOCUMENT":e.$el.html(b),e.maindiv=e.$el.find("#docspad-viewerdiv-main"),e.pages=[],e.$el.find("."+e.UI.classNames.pageFrame).each(function(b){e.pages[b]=a(this)}),e.observer.fire("mainDocLoaded");break;case"DP_PRESENTATION":e.$el.html(b),e.maindiv=e.$el.find("#docspad-viewerdiv-main"),e.pages=[],e.$el.find("."+e.UI.classNames.pageFrame).each(function(b){e.pages[b]=a(this)}),e.observer.fire("mainDocLoaded")}},loadDocPage:function(b){var c=b[0],d=b[1];switch(pageContentjq=a(d),e.options.layout){case"DP_DOCUMENT":e.pages[c-1].replaceWith(pageContentjq),e.pages[c-1]=e.$el.find(".pf:nth-child("+c+")"),1!=e.layout.scaleRatio&&e.layout.documentLayout.zoomPage(c);break;case"DP_PRESENTATION":c!=e.layout.pageNo&&(pageContentjq=pageContentjq.css("display","none")),e.pages[c-1].replaceWith(pageContentjq),e.pages[c-1]=e.$el.find(".pf:nth-child("+c+")"),1!=e.layout.scaleRatio&&e.layout.presentationLayout.zoomPage(c)}e.observer.fire("onPageLoad",[b[0]])}},e.documentdata={numPages:0,filename:"",contentFetchable:0,contentViewable:0,pagesLoaded:[],onPageNavLoad:0,init:function(){e.observer.register("contentFetchable"),e.observer.subscribe("contentFetchable",e.documentdata.fetchDocMain),e.observer.register("contentViewable"),e.observer.subscribe("contentViewable",e.UI.setPagesLoader),e.observer.subscribe("contentViewable",e.layout.init),e.observer.subscribe("contentViewable",e.documentdata.initPageLoadedFlag),e.observer.subscribe("contentViewable",e.documentdata.fetchPages),e.observer.register("pagesLoaded"),e.observer.subscribe("pagesLoaded",e.documentdata.updatePageLoadedFlag)},isPageValid:function(a){if(1==e.documentdata.contentViewable)return a<=e.documentdata.numPages&a>=1&parseInt(a)==a?!0:!1;throw 4e3},fetchMetaData:function(){var b="";b=e.options.enablemapURLS?e.options.mappedURLS.info:e.options.enableProxyFetch?e.options.proxyServerInfo.fetchMetaDataURL:e.options.documentURL+"info.json",a.get(b,function(b){try{"string"==typeof b&&(b=a.parseJSON(b)),e.documentdata.numPages=b.pages,e.documentdata.filename=b.name,e.documentdata.setFetchable()}catch(c){throw 4001}}).fail(function(){a(e.options.errorElement).html(e.error.getMessage(4004))})},setFetchable:function(){e.documentdata.contentFetchable=1,e.observer.fire("contentFetchable")},setViewable:function(){e.documentdata.contentViewable=1,e.observer.fire("contentViewable")},fetchDocMain:function(){if(!e.documentdata.contentFetchable)throw 4001;var b="";b=e.options.enablemapURLS?e.options.mappedURLS.mainpage:e.options.enableProxyFetch?e.options.proxyServerInfo.fetchMainURL:e.options.documentURL+"html/page.html",a.get(b,function(a){e.UI.loadDocMain(a)})},fetchPages:function(){if(!e.documentdata.contentViewable)throw 4002;for(var a=e.options.progressiveLoadInfo.startPage,b=e.options.progressiveLoadInfo.offset,c=a;a+b>=c;c++)e.documentdata.fetchDocPage(c);switch(e.options.progressiveLoadInfo.loadPages){case"ALL":for(var c=1;c<=e.documentdata.numPages;c++)e.documentdata.fetchDocPage(c);break;case"ONPAGENAV":e.observer.subscribe("pageChange",e.documentdata.fetchPagesOnNav)}e.options.callbacks.onReady([e.documentdata.numPages])},fetchPagesOnNav:function(a){for(var b=a[0];b<=a[0]+e.options.progressiveLoadInfo.offset;b++)e.documentdata.fetchDocPage(b)},fetchDocPage:function(b){if(b=parseInt(b),!e.documentdata.contentViewable)throw 4002;if(!e.documentdata.isPageValid(b))return!1;if(!e.documentdata.pagesLoaded[b-1]){var c="";e.options.enablemapURLS?(c=e.options.mappedURLS["page"+b],a.get(c,{pageNo:b},function(a){""!=a?(e.UI.loadDocPage([b,a]),e.observer.fire("pagesLoaded",[b,1])):(e.documentdata.fetchDocPage(b),e.observer.fire("pagesLoaded",[b,0]))})):e.options.enableProxyFetch?(c=e.options.proxyServerInfo.fetchPageURL,a.get(c,{pageNo:b},function(a){e.options.proxyServerInfo.customPageCheck(a,b)&&(e.UI.loadDocPage([b,a]),e.observer.fire("pagesLoaded",[b,1]))})):(c=e.options.documentURL+"html/page-"+b+".html",a.get(c,{pageNo:b},function(a){""!=a?(e.UI.loadDocPage([b,a]),e.observer.fire("pagesLoaded",[b,1])):(e.documentdata.fetchDocPage(b),e.observer.fire("pagesLoaded",[b,0]))}))}},initPageLoadedFlag:function(){for(var a=0;a<e.documentdata.numPages;a++)e.documentdata.pagesLoaded[a]=0},updatePageLoadedFlag:function(a){var b=a[0],c=a[1];2==c?e.documentdata.pagesLoaded[b-1]=2:1==c?e.documentdata.pagesLoaded[b-1]=1:0==c&&(e.documentdata.pagesLoaded[b-1]=0)}},e.error={getMessage:function(a){switch(a){case 4e3:return"content not ready for viewing";case 4001:return"metadata file is corrupt or illegal access of method";case 4002:return"content not ready for view";case 4003:return"Invalid Page Number";case 4004:return"Invalid URL"}}},e.observer={handlers:[],register:function(b,c){this.handlers[b]=void 0===c?a.Callbacks():a.Callbacks(c)},subscribe:function(a,b){this.handlers[a].add(b)},unsubscribe:function(a,b){this.handlers[a].remove(b)},fire:function(a,b){void 0===b?this.handlers[a].fire():this.handlers[a].fire(b)}},e.general={roundOff:function(a,b){return(Math.round((a*Math.pow(10,b)).toFixed(b-1))/Math.pow(10,b)).toFixed(b)}},e.controls={subscribeToFullScreen:function(){a(window).on("fscreenopen",function(){}),a(window).on("fscreenclose",function(){setTimeout(function(){switch(e.layout.fullScreenLock=0,e.options.layout){case"DP_DOCUMENT":break;case"DP_PRESENTATION":var a=(/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor));a&&e.$el.css("padding-top","20px"),e.controls.optimiseToViewer()}},200)})},enterFullScreen:function(){switch(e.$el.fullscreen(),e.options.layout){case"DP_DOCUMENT":e.$el.css("overflow","auto");break;case"DP_PRESENTATION":var b=(/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor));setTimeout(function(){b&&(e.layout.scaleRatio=1,e.$el.css("padding-top","50px"),a.each(e.pages,function(a,b){b.width(e.layout.originalWidth),b.height(e.layout.originalHeight)}),e.controls.optimiseToViewer())},200)}},exitFullScreen:function(){a.fullscreen.exit()},optimiseToViewer:function(){switch(e.options.layout){case"DP_DOCUMENT":e.layout.documentLayout.fitWidth();break;case"DP_PRESENTATION":var a=e.layout.aspectRatio,b=e.$el.height()-e.options.resizeOffsetHeight,c=e.$el.width()-e.options.resizeOffsetWidth;c>a*b?e.layout.presentationLayout.fitHeight([1]):e.layout.presentationLayout.fitWidth([1])}},next:function(){var a;switch(e.layout.pageNo<e.documentdata.numPages&e.layout.pageNo>=1&&(a=e.layout.pageNo+1),e.options.layout){case"DP_DOCUMENT":e.layout.documentLayout.scrollTo([a]);break;case"DP_PRESENTATION":e.layout.presentationLayout.gotoPage([a])}},previous:function(){var a;switch(e.layout.pageNo<=e.documentdata.numPages&e.layout.pageNo>1&&(a=e.layout.pageNo-1),e.options.layout){case"DP_DOCUMENT":e.layout.documentLayout.scrollTo([a]);break;case"DP_PRESENTATION":e.layout.presentationLayout.gotoPage([a])}},gotoPage:function(a){switch(e.options.layout){case"DP_DOCUMENT":e.layout.documentLayout.scrollTo([a]);break;case"DP_PRESENTATION":e.layout.presentationLayout.gotoPage([a])}},zoomIn:function(){var a;if(e.general.roundOff(e.layout.scaleRatio,1)>=.5)switch(a=parseFloat(e.layout.scaleRatio)+e.options.scaleStep,e.options.layout){case"DP_DOCUMENT":e.layout.documentLayout.zoomTo([a]);break;case"DP_PRESENTATION":e.layout.presentationLayout.zoomTo([a])}},zoomOut:function(){var a;switch(a=e.general.roundOff(e.layout.scaleRatio,1)>.5?e.general.roundOff(e.layout.scaleRatio,1)-e.options.scaleStep:.5,e.options.layout){case"DP_DOCUMENT":e.layout.documentLayout.zoomTo([a]);break;case"DP_PRESENTATION":e.layout.presentationLayout.zoomTo([a])}},downloadOriginalURL:function(){return e.options.documentURL+e.documentdata.filename},setPageHTML:function(a,b,c){e.UI.setPageHTML(a,b,c)},getScaleRatio:function(){return e.layout.scaleRatio}},e.init()},a.DP.viewer.defaultOptions={enableProxyFetch:!1,proxyServerInfo:{fetchMetaDataURL:"",customMetaDataCheck:function(){return!0},fetchMainURL:"",customMainCheck:function(){return!0},fetchPageURL:"",customPageCheck:function(){return!0}},enablemapURLS:!1,mappedURLS:[],layout:"DP_DOCUMENT",loaderPath:"img/DPPreloader.gif",documentURL:"resources/",localURLFlag:1,scaleStep:.1,responsive:1,errorElement:".DP-errorinfo",resizeOffsetWidth:100,resizeOffsetHeight:20,progressiveLoadInfo:{startPage:1,offset:5,loadPages:"ONPAGENAV"},callbacks:{onReady:function(){},zoomChange:function(){},pageChange:function(){},fullScreenChange:function(){},onPageLoad:function(){}}},a.fn.DPviewer=function(b,c){return this.each(function(){new a.DP.viewer(this,b,c)})}}(jQuery);